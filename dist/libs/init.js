var g=this&&this.__awaiter||function(e,o,n,t){return new(n||(n=Promise))((function(s,i){function a(e){try{c(t.next(e))}catch(e){i(e)}}function r(e){try{c(t.throw(e))}catch(e){i(e)}}function c(e){var o;e.done?s(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(a,r)}c((t=t.apply(e,o||[])).next())}))};import{exit as o}from"process";import{CheckPath as Nt,WaitFor as Fe}from"@yangzw/bruce-us/dist/node.js";import Je from"ora";import{ParseConfig as V}from"../configs/index.js";import{MateRender as je}from"../generators/index.js";import{InitAnswer as rr}from"../helpers/index.js";import{INIT_TEXT as _T}from"../langs/index.js";import{JudgeFile as H,ShowTitle as De}from"../utils/index.js";export default function O(e){return g(this,void 0,void 0,(function*(){De("init");const n=H("","configFile"),t=H("src");n||(console.log(_T.judgeBrucerc),o(1));const{frame:s,style:i,useTs:a}=yield V();"js"===s&&(console.log(_T.judgeFrame),o(1)),Nt("node_modules")||(console.log(_T.judgeModules),o(1)),Nt("package.json")||(console.log(_T.judgePackage),o(1)),a&&!Nt("tsconfig.json")&&(console.log(_T.judgeTsconfig),o(1)),t||(console.log(_T.judgeIndexes),o(1));const{name:r,template:c}=e,l=r&&c?{mateName:r,template:c}:yield rr(),m=Je(_T.doing).start();je({frame:s,name:l.mateName,style:i,template:l.template,useTs:a}),yield Fe(2e3),m.stop(),console.log(_T.done),o(1)}))}