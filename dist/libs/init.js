var x=this&&this.__awaiter||function(e,o,n,t){return new(n||(n=Promise))((function(s,i){function r(e){try{a(t.next(e))}catch(e){i(e)}}function c(e){try{a(t.throw(e))}catch(e){i(e)}}function a(e){var o;e.done?s(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(r,c)}a((t=t.apply(e,o||[])).next())}))};import{exit as o}from"process";import{CheckPath as He,WaitFor as Ze}from"@yangzw/bruce-us/dist/node.js";import no from"ora";import{ParseConfig as W}from"../configs/index.js";import{MateRender as rr}from"../generators/index.js";import{InitAnswer as or}from"../helpers/index.js";import{INIT_TEXT as mo}from"../langs/index.js";import{JudgeFile as V,ShowTitle as io}from"../utils/index.js";export default function O(e){return x(this,void 0,void 0,(function*(){io("init");const n=V("","configFile"),t=V("src");n||(console.log(mo.judgeBrucerc),o(1));const{frame:s,style:i,useTs:r}=yield W();"js"===s&&(console.log(mo.judgeFrame),o(1)),He("node_modules")||(console.log(mo.judgeModules),o(1)),He("package.json")||(console.log(mo.judgePackage),o(1)),r&&!He("tsconfig.json")&&(console.log(mo.judgeTsconfig),o(1)),t||(console.log(mo.judgeIndexes),o(1));const{name:c,template:a}=e,l=c&&a?{mateName:c,template:a}:yield or(),m=no(mo.doing).start();rr({frame:s,name:l.mateName,style:i,template:l.template,useTs:r}),yield Ze(2e3),m.stop(),console.log(mo.done),o(1)}))}