import{dirname as w}from"path";import{fileURLToPath as B}from"url";import{AbsPath as E}from"@yangzw/bruce-us/dist/node.js";import{BROWSERS_ES5 as n}from"../../constants/util/index.js";export default function p({browsers:e=[],debug:r=!1,frame:o="js",mode:s="static",useTs:t=!1}={}){const l=w(B(import.meta.url)),a=e.length?e:n,p="static"===s;return{loader:"babel-loader",options:{babelrc:!1,cacheDirectory:!0,cwd:E("../..",l),plugins:[p&&!r&&["@babel/plugin-transform-runtime",{corejs:3,regenerator:!1,useESModules:!0}],["@babel/plugin-proposal-decorators",{legacy:!0}],["@babel/plugin-proposal-class-properties",{loose:!0}],["@babel/plugin-proposal-private-methods",{loose:!0}],["@babel/plugin-proposal-private-property-in-object",{loose:!0}],r&&"react"===o&&"react-refresh/babel"].filter(Boolean),presets:[p&&["@babel/preset-env",{corejs:3,modules:!1,targets:{browsers:a},useBuiltIns:"usage"}],t&&["@babel/preset-typescript",{allExtensions:"vue"===o}],"@babel/preset-react"].filter(Boolean)}}}