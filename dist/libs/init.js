var g=this&&this.__awaiter||function(e,o,n,t){return new(n||(n=Promise))((function(s,i){function a(e){try{c(t.next(e))}catch(e){i(e)}}function r(e){try{c(t.throw(e))}catch(e){i(e)}}function c(e){var o;e.done?s(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(a,r)}c((t=t.apply(e,o||[])).next())}))};import{exit as o}from"process";import{CheckPath as Nt,WaitFor as Fe}from"@yangzw/bruce-us/dist/node.js";import Ae from"ora";import{ParseConfig as H}from"../configs/index.js";import{MateRender as je}from"../generators/index.js";import{InitAnswer as rr}from"../helpers/index.js";import{INIT_TEXT as aT}from"../langs/index.js";import{JudgeFile as k,ShowTitle as Je}from"../utils/index.js";export default function v(e){return g(this,void 0,void 0,(function*(){Je("init");const n=k("","configFile"),t=k("src");n||(console.log(aT.judgeBrucerc),o(1));const{frame:s,style:i,useTs:a}=yield H();"js"===s&&(console.log(aT.judgeFrame),o(1)),Nt("node_modules")||(console.log(aT.judgeModules),o(1)),Nt("package.json")||(console.log(aT.judgePackage),o(1)),a&&!Nt("tsconfig.json")&&(console.log(aT.judgeTsconfig),o(1)),t||(console.log(aT.judgeIndexes),o(1));const{name:r,template:c}=e,l=r&&c?{mateName:r,template:c}:yield rr(),m=Ae(aT.doing).start();je({frame:s,name:l.mateName,style:i,template:l.template,useTs:a}),yield Fe(2e3),m.stop(),console.log(aT.done),o(1)}))}