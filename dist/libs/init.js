var x=this&&this.__awaiter||function(e,o,n,t){return new(n||(n=Promise))((function(s,i){function r(e){try{a(t.next(e))}catch(e){i(e)}}function c(e){try{a(t.throw(e))}catch(e){i(e)}}function a(e){var o;e.done?s(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(r,c)}a((t=t.apply(e,o||[])).next())}))};import{exit as s}from"node:process";import{CheckPath as Ke,WaitFor as to}from"@yangzw/bruce-us/dist/node.js";import no from"ora";import{ParseConfig as W}from"../configs/index.js";import{MateRender as rr}from"../generators/index.js";import{InitAnswer as or}from"../helpers/index.js";import{INIT_TEXT as mo}from"../langs/index.js";import{JudgeFile as V,ShowTitle as io}from"../utils/index.js";export default function O(e){return x(this,void 0,void 0,(function*(){io("init");const o=V("","configFile"),n=V("src");o||(console.log(mo.judgeBrucerc),s(1));const{frame:t,style:i,useTs:r}=yield W();"js"===t&&(console.log(mo.judgeFrame),s(1)),Ke("node_modules")||(console.log(mo.judgeModules),s(1)),Ke("package.json")||(console.log(mo.judgePackage),s(1)),r&&!Ke("tsconfig.json")&&(console.log(mo.judgeTsconfig),s(1)),n||(console.log(mo.judgeIndexes),s(1));const{name:c,template:a}=e,l=c&&a?{mateName:c,template:a}:yield or(),m=no(mo.doing).start();rr({frame:t,name:l.mateName,style:i,template:l.template,useTs:r}),yield to(2e3),m.stop(),console.log(mo.done),s(1)}))}